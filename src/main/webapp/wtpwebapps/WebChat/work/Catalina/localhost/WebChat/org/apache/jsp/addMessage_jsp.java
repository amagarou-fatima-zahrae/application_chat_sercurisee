/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/10.1.7
 * Generated at: 2023-04-07 09:09:19 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import jakarta.servlet.*;
import jakarta.servlet.http.*;
import jakarta.servlet.jsp.*;

public final class addMessage_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports,
                 org.apache.jasper.runtime.JspSourceDirectives {

  private static final jakarta.servlet.jsp.JspFactory _jspxFactory =
          jakarta.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(3);
    _jspx_dependants.put("/WEB-INF/views/header.jsp", Long.valueOf(1679008650912L));
    _jspx_dependants.put("/WEB-INF/lib/jakarta.servlet.jsp.jstl-2.0.0.jar", Long.valueOf(1679008435812L));
    _jspx_dependants.put("jar:file:/D:/projet/WebChat/src/main/webapp/wtpwebapps/WebChat/WEB-INF/lib/jakarta.servlet.jsp.jstl-2.0.0.jar!/META-INF/c.tld", Long.valueOf(1602870372000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("jakarta.servlet");
    _jspx_imports_packages.add("jakarta.servlet.http");
    _jspx_imports_packages.add("jakarta.servlet.jsp");
    _jspx_imports_classes = null;
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvarStatus_005fvar_005fitems;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fchoose;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fout_0026_005fvalue_005fnobody;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fotherwise;

  private volatile jakarta.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public boolean getErrorOnELNotFound() {
    return false;
  }

  public jakarta.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvarStatus_005fvar_005fitems = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fchoose = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fout_0026_005fvalue_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fotherwise = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvarStatus_005fvar_005fitems.release();
    _005fjspx_005ftagPool_005fc_005fchoose.release();
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.release();
    _005fjspx_005ftagPool_005fc_005fout_0026_005fvalue_005fnobody.release();
    _005fjspx_005ftagPool_005fc_005fotherwise.release();
  }

  public void _jspService(final jakarta.servlet.http.HttpServletRequest request, final jakarta.servlet.http.HttpServletResponse response)
      throws java.io.IOException, jakarta.servlet.ServletException {

    if (!jakarta.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      final java.lang.String _jspx_method = request.getMethod();
      if ("OPTIONS".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        return;
      }
      if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "Les JSPs ne permettent que GET, POST ou HEAD. Jasper permet aussi OPTIONS");
        return;
      }
    }

    final jakarta.servlet.jsp.PageContext pageContext;
    jakarta.servlet.http.HttpSession session = null;
    final jakarta.servlet.ServletContext application;
    final jakarta.servlet.ServletConfig config;
    jakarta.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    jakarta.servlet.jsp.JspWriter _jspx_out = null;
    jakarta.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("  \r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("\r\n");
      out.write("    <meta charset=\"UTF-8\">\r\n");
      out.write("    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n");
      out.write("    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n");
      out.write("    <title>Chat App</title>\r\n");
      out.write("    \r\n");
      out.write("    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css\" integrity=\"sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />");
      out.write("\r\n");
      out.write("<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css\" />\r\n");
      out.write("\r\n");
      out.write("<style>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("/*  *{\r\n");
      out.write("margin:0;\r\n");
      out.write("padding:0;\r\n");
      out.write("outline:none;\r\n");
      out.write("border:none;\r\n");
      out.write("text-decoration:none;\r\n");
      out.write("box-sizing:border-box;\r\n");
      out.write("font-family:sans-serif;\r\n");
      out.write("\r\n");
      out.write("} \r\n");
      out.write(" */\r\n");
      out.write(".body1{\r\n");
      out.write("\r\n");
      out.write("margin:0;\r\n");
      out.write("padding:0;\r\n");
      out.write("outline:none;\r\n");
      out.write("border:none;\r\n");
      out.write("text-decoration:none;\r\n");
      out.write("box-sizing:border-box;\r\n");
      out.write("font-family:sans-serif;\r\n");
      out.write("   background-color: #fbab7e; \r\n");
      out.write(" background-image: linear-gradient(62deg, #fbab7e 0%, #d90647 100%);\r\n");
      out.write("   height: 140vh;\r\n");
      out.write("  width: 95vw; } \r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write(".nav1{\r\n");
      out.write("position:absolute;\r\n");
      out.write("top:0;\r\n");
      out.write("bottom:0;\r\n");
      out.write("height: 140vh;\r\n");
      out.write("left:0;\r\n");
      out.write("background:#fff;\r\n");
      out.write("width:120px;\r\n");
      out.write("overflow:hidden;\r\n");
      out.write("transition:width 0.2s linear;\r\n");
      out.write("box-shadow:0 20px 35px rgba(0,0,0,0.1);\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".logo1{\r\n");
      out.write("text-align:center;\r\n");
      out.write("display:flex;\r\n");
      out.write("transition:all 0.5s ease;\r\n");
      out.write("margin:10px 0 0 ;\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write(".ul1{\r\n");
      out.write(" list-style-type: none;\r\n");
      out.write("}\r\n");
      out.write(".logo1 .img1{\r\n");
      out.write("width:75px;\r\n");
      out.write("height:75px;\r\n");
      out.write("border-radius:50%;\r\n");
      out.write("}\r\n");
      out.write(".logo1 .span1{\r\n");
      out.write("font-weight:bold;\r\n");
      out.write("padding-left:15px;\r\n");
      out.write("font-size:18px;\r\n");
      out.write("text-transform:uppercase;\r\n");
      out.write("}\r\n");
      out.write(".a1{\r\n");
      out.write("position:relative;\r\n");
      out.write("color:rgb(85,83,83);\r\n");
      out.write("font-size:14px;\r\n");
      out.write("display:table;\r\n");
      out.write("width:300px;\r\n");
      out.write("padding:10px;\r\n");
      out.write("text-decoration:none;\r\n");
      out.write("}\r\n");
      out.write(".fas{\r\n");
      out.write("position:relative;\r\n");
      out.write("width:70px;\r\n");
      out.write("height:40px;\r\n");
      out.write("top:14px;\r\n");
      out.write("font-size:20px;\r\n");
      out.write("text-align:center;\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write(".nav1-item{\r\n");
      out.write("position:relative;\r\n");
      out.write("top:12px;\r\n");
      out.write("margin-left:10px;\r\n");
      out.write("}\r\n");
      out.write(".a1:hover{\r\n");
      out.write("backgound:#eee;\r\n");
      out.write("text-decoration:none;\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write(".nav1:hover{\r\n");
      out.write("text-decoration:none;\r\n");
      out.write("width:280px;\r\n");
      out.write("transition:all 0.5s ease;\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write(".logoute{\r\n");
      out.write("position:absolute;\r\n");
      out.write("bottom:0;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("body,\r\n");
      out.write("html {\r\n");
      out.write("\r\n");
      out.write("height: 160vh;\r\n");
      out.write("margin: 0;\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write(".chat {\r\n");
      out.write("margin-top: auto;\r\n");
      out.write("margin-bottom: auto;\r\n");
      out.write("}\r\n");
      out.write(".card {\r\n");
      out.write("height: 500px;\r\n");
      out.write("border-radius: 15px !important;\r\n");
      out.write("background-color: rgba(116, 23, 23, 0.4) !important;\r\n");
      out.write("}\r\n");
      out.write(".contacts_body {\r\n");
      out.write("padding: 0.75rem 0 !important;\r\n");
      out.write("overflow-y: auto;\r\n");
      out.write("white-space: nowrap;\r\n");
      out.write("}\r\n");
      out.write(".msg_card_body {\r\n");
      out.write("overflow-y: auto;\r\n");
      out.write("}\r\n");
      out.write(".card-header {\r\n");
      out.write("border-radius: 15px 15px 0 0 !important;\r\n");
      out.write("border-bottom: 0 !important;\r\n");
      out.write("}\r\n");
      out.write(".card-footer {\r\n");
      out.write("border-radius: 0 0 15px 15px !important;\r\n");
      out.write("border-top: 0 !important;\r\n");
      out.write("}\r\n");
      out.write(".container {\r\n");
      out.write("align-content: center;\r\n");
      out.write("}\r\n");
      out.write(".search {\r\n");
      out.write("border-radius: 15px 0 0 15px !important;\r\n");
      out.write("background-color: rgba(0, 0, 0, 0.3) !important;\r\n");
      out.write("border: 0 !important;\r\n");
      out.write("color: white !important;\r\n");
      out.write("}\r\n");
      out.write(".search:focus {\r\n");
      out.write("box-shadow: none !important;\r\n");
      out.write("outline: 0px !important;\r\n");
      out.write("}\r\n");
      out.write(".type_msg {\r\n");
      out.write("background-color: rgba(0, 0, 0, 0.3) !important;\r\n");
      out.write("border: 0 !important;\r\n");
      out.write("color: white !important;\r\n");
      out.write("height: 53px !important;\r\n");
      out.write("overflow-y: auto;\r\n");
      out.write("}\r\n");
      out.write(".type_msg:focus {\r\n");
      out.write("box-shadow: none !important;\r\n");
      out.write("outline: 0px !important;\r\n");
      out.write("}\r\n");
      out.write(".attach_btn {\r\n");
      out.write("border-radius: 15px 0 0 15px !important;\r\n");
      out.write("background-color: rgba(0, 0, 0, 0.3) !important;\r\n");
      out.write("border: 0 !important;\r\n");
      out.write("color: white !important;\r\n");
      out.write("cursor: pointer;\r\n");
      out.write("}\r\n");
      out.write(".send_btn {\r\n");
      out.write("border-radius: 0 15px 15px 0 !important;\r\n");
      out.write("background-color: rgba(0, 0, 0, 0.3) !important;\r\n");
      out.write("border: 0 !important;\r\n");
      out.write("color: white !important;\r\n");
      out.write("cursor: pointer;\r\n");
      out.write("height:53px;\r\n");
      out.write("}\r\n");
      out.write(".search_btn {\r\n");
      out.write("border-radius: 0 15px 15px 0 !important;\r\n");
      out.write("background-color: rgba(0, 0, 0, 0.3) !important;\r\n");
      out.write("border: 0 !important;\r\n");
      out.write("color: white !important;\r\n");
      out.write("cursor: pointer;\r\n");
      out.write("}\r\n");
      out.write(".contacts {\r\n");
      out.write("list-style: none;\r\n");
      out.write("padding: 0;\r\n");
      out.write("}\r\n");
      out.write(".contacts li {\r\n");
      out.write("width: 100% !important;\r\n");
      out.write("padding: 5px 10px;\r\n");
      out.write("margin-bottom: 15px !important;\r\n");
      out.write("}\r\n");
      out.write(".active {\r\n");
      out.write("background-color: rgba(0, 0, 0, 0.3);\r\n");
      out.write("}\r\n");
      out.write(".user_img {\r\n");
      out.write("height: 60px;\r\n");
      out.write("width: 60px;\r\n");
      out.write("border: 1.5px solid #f5f6fa;\r\n");
      out.write("}\r\n");
      out.write(".user_img_msg {\r\n");
      out.write("height: 40px;\r\n");
      out.write("width: 40px;\r\n");
      out.write("border: 1.5px solid #f5f6fa;\r\n");
      out.write("}\r\n");
      out.write(".img_cont {\r\n");
      out.write("position: relative;\r\n");
      out.write("height: 70px;\r\n");
      out.write("width: 70px;\r\n");
      out.write("}\r\n");
      out.write(".img_cont_msg {\r\n");
      out.write("height: 40px;\r\n");
      out.write("width: 40px;\r\n");
      out.write("}\r\n");
      out.write(".online_icon {\r\n");
      out.write("position: absolute;\r\n");
      out.write("height: 15px;\r\n");
      out.write("width: 15px;\r\n");
      out.write("background-color: #4cd137;\r\n");
      out.write("border-radius: 50%;\r\n");
      out.write("bottom: 13px;\r\n");
      out.write("right: 13px;\r\n");
      out.write("border: 1.5px solid white;\r\n");
      out.write("}\r\n");
      out.write(".offline {\r\n");
      out.write("background-color: #c23616 !important;\r\n");
      out.write("}\r\n");
      out.write(".user_info {\r\n");
      out.write("margin-top: auto;\r\n");
      out.write("margin-bottom: auto;\r\n");
      out.write("margin-left: 15px;\r\n");
      out.write("}\r\n");
      out.write(".user_info span {\r\n");
      out.write("font-size: 20px;\r\n");
      out.write("color: white;\r\n");
      out.write("}\r\n");
      out.write(".user_info p {\r\n");
      out.write("font-size: 10px;\r\n");
      out.write("color: rgba(255, 255, 255, 0.6);\r\n");
      out.write("}\r\n");
      out.write(".video_cam {\r\n");
      out.write("margin-left: 50px;\r\n");
      out.write("margin-top: 5px;\r\n");
      out.write("}\r\n");
      out.write(".video_cam span {\r\n");
      out.write("color: white;\r\n");
      out.write("font-size: 20px;\r\n");
      out.write("cursor: pointer;\r\n");
      out.write("margin-right: 20px;\r\n");
      out.write("}\r\n");
      out.write(".msg_cotainer {\r\n");
      out.write("margin-top: auto;\r\n");
      out.write("margin-bottom: auto;\r\n");
      out.write("margin-left: 10px;\r\n");
      out.write("border-radius: 25px;\r\n");
      out.write("background-color: #82ccdd;\r\n");
      out.write("padding: 10px;\r\n");
      out.write("position: relative;\r\n");
      out.write("}\r\n");
      out.write(".msg_cotainer_send {\r\n");
      out.write("margin-top: auto;\r\n");
      out.write("margin-bottom: auto;\r\n");
      out.write("margin-right: 10px;\r\n");
      out.write("border-radius: 25px;\r\n");
      out.write("background-color: #78e08f;\r\n");
      out.write("padding: 10px;\r\n");
      out.write("position: relative;\r\n");
      out.write("}\r\n");
      out.write(".msg_time {\r\n");
      out.write("position: absolute;\r\n");
      out.write("left: 0;\r\n");
      out.write("bottom: -15px;\r\n");
      out.write("color: balck;\r\n");
      out.write("font-size: 10px;\r\n");
      out.write("}\r\n");
      out.write(".msg_time_send {\r\n");
      out.write("position: absolute;\r\n");
      out.write("right: 0;\r\n");
      out.write("bottom: -15px;\r\n");
      out.write("color: balck;\r\n");
      out.write("font-size: 10px;\r\n");
      out.write("}\r\n");
      out.write(".msg_head {\r\n");
      out.write("position: relative;\r\n");
      out.write("}\r\n");
      out.write("#action_menu_btn {\r\n");
      out.write("position: absolute;\r\n");
      out.write("right: 10px;\r\n");
      out.write("top: 1px;\r\n");
      out.write("color: white;\r\n");
      out.write("cursor: pointer;\r\n");
      out.write("font-size: 20px;\r\n");
      out.write("}\r\n");
      out.write(".action_menu {\r\n");
      out.write("z-index: 1;\r\n");
      out.write("position: absolute;\r\n");
      out.write("padding: 15px 0;\r\n");
      out.write("background-color: rgba(0, 0, 0, 0.5);\r\n");
      out.write("color: white;\r\n");
      out.write("border-radius: 15px;\r\n");
      out.write("top: 30px;\r\n");
      out.write("right: 15px;\r\n");
      out.write("display: none;\r\n");
      out.write("}\r\n");
      out.write(".action_menu ul {\r\n");
      out.write("list-style: none;\r\n");
      out.write("padding: 0;\r\n");
      out.write("margin: 0;\r\n");
      out.write("}\r\n");
      out.write(".action_menu ul li {\r\n");
      out.write("width: 100%;\r\n");
      out.write("padding: 10px 15px;\r\n");
      out.write("margin-bottom: 5px;\r\n");
      out.write("}\r\n");
      out.write(".action_menu ul li i {\r\n");
      out.write("padding-right: 10px;\r\n");
      out.write("}\r\n");
      out.write(".action_menu ul li:hover {\r\n");
      out.write("cursor: pointer;\r\n");
      out.write("background-color: rgba(0, 0, 0, 0.2);\r\n");
      out.write("}\r\n");
      out.write("/* width */\r\n");
      out.write("::-webkit-scrollbar {\r\n");
      out.write("width: 10px;\r\n");
      out.write("}\r\n");
      out.write(".warning {\r\n");
      out.write("/* border: 10px ridge; */\r\n");
      out.write("/* background-color: #ff0; */\r\n");
      out.write("padding: 0.5rem;\r\n");
      out.write("display: flex;\r\n");
      out.write("flex-direction: column;\r\n");
      out.write("}\r\n");
      out.write(".warning img {\r\n");
      out.write("width: 100%; \r\n");
      out.write("}\r\n");
      out.write("/* Track */\r\n");
      out.write("::-webkit-scrollbar-track {\r\n");
      out.write("background: #f1f1f1;\r\n");
      out.write("}\r\n");
      out.write("/* Handle */\r\n");
      out.write("::-webkit-scrollbar-thumb {\r\n");
      out.write("background: #888;\r\n");
      out.write("}\r\n");
      out.write("/* Handle on hover */\r\n");
      out.write("::-webkit-scrollbar-thumb:hover {\r\n");
      out.write("background: #555;\r\n");
      out.write("}\r\n");
      out.write("@media(max-width: 576px) {\r\n");
      out.write(".contacts_card {\r\n");
      out.write("margin-bottom: 15px !important;\r\n");
      out.write("}\r\n");
      out.write("}\r\n");
      out.write("</style>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("</head>\r\n");
      out.write("<body  class=\"body1\">\r\n");
      out.write("<div>\r\n");
      out.write("<nav class=\"nav1\">\r\n");
      out.write("		<ul class=\"ul1\">\r\n");
      out.write("			<li>\r\n");
      out.write("				\r\n");
      out.write("				<a href=\"#\" class=\"logo1 a1\">\r\n");
      out.write("					<img src=\"./photos/logo.png\" alt=\"\" class=\"logo1 img1 \" style=\"with:20px\";>\r\n");
      out.write("					<span class=\"nav1-item span1\">ChatApp</span>\r\n");
      out.write("				</a>\r\n");
      out.write("			</li>\r\n");
      out.write("			<li><a href=\"\" class=\"a1\">\r\n");
      out.write("				<i class=\"fas fa-home\" style=\"color: #000000;\"></i>\r\n");
      out.write("				<span class=\"nav1-item span1\" style=\"color: #000000;\">Home </span>\r\n");
      out.write("			</a></li>\r\n");
      out.write("			<li><a href=\"Show\" class=\"a1\" >\r\n");
      out.write("				<i class=\"fas fa-user\" style=\"color: #000000;\"></i>\r\n");
      out.write("				<span class=\"nav1-item span1\" style=\"color: #000000;\">Profile </span>\r\n");
      out.write("			</a></li>\r\n");
      out.write("			<li><a href=\"Ajouter.jsp\" class=\"a1\">\r\n");
      out.write("				<i class=\"fas fa-wallet\" style=\"color: #000000;\"></i>\r\n");
      out.write("				<span class=\"nav1-item span1\" style=\"color: #000000;\">Add contact </span>\r\n");
      out.write("			</a></li>\r\n");
      out.write("			<li><a href=\"show_invit.jsp\" class=\"a1\">\r\n");
      out.write("				<i class=\"fas fa-chart-bar\" style=\"color: #000000;\"></i>\r\n");
      out.write("				<span class=\"nav1-item span1\" style=\"color: #000000;\">display invitations </span>\r\n");
      out.write("			</a></li>\r\n");
      out.write("			<li><a href=\"FetchData\" class=\"a1\">\r\n");
      out.write("				<i class=\"fas fa-tasks\" style=\"color: #000000;\"></i>\r\n");
      out.write("				<span class=\"nav1-item span1\" style=\"color: #000000;\">Display contact </span>\r\n");
      out.write("				\r\n");
      out.write("			\r\n");
      out.write("			</a></li>\r\n");
      out.write("			<li><a href=\"ListeMessages\" >\r\n");
      out.write("				<i class=\"fas fa-envelope\" style=\"color: #000000;\"></i>\r\n");
      out.write("				<span class=\"nav-item\" style=\"color: #000000;\">Liste Discussions </span>\r\n");
      out.write("			</a></li>\r\n");
      out.write("			\r\n");
      out.write("			<!-- <li><a href=\"#\" >\r\n");
      out.write("				<i class=\"fas fa-question-circle\" style=\"color: #000000;\"></i>\r\n");
      out.write("				<span class=\"nav1-item span1\" style=\"color: #000000;\">Help </span>\r\n");
      out.write("			</a></li> -->\r\n");
      out.write("			\r\n");
      out.write("						\r\n");
      out.write("			<li><a class=\"a1\" >\r\n");
      out.write("				<i  class=\"fas fa-sign-out\" class=\"logoute\" style=\"color: #000000;\"></i>\r\n");
      out.write("			\r\n");
      out.write("				<button type=\"button\" class=\"nav1-item span1\" data-toggle=\"modal\" data-target=\"#e\">\r\n");
      out.write("				 Se déconnecter\r\n");
      out.write("				</button>\r\n");
      out.write("				<div class=\"modal fade\" id=\"e\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"ex\" aria-hidden=\"true\">\r\n");
      out.write("  <div class=\"modal-dialog\" role=\"document\">\r\n");
      out.write("    <div class=\"modal-content\">\r\n");
      out.write("      <div class=\"modal-header\">\r\n");
      out.write("        <h5 class=\"modal-title\" id=\"ex\">Déconnexion</h5>\r\n");
      out.write("        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n");
      out.write("          <span aria-hidden=\"true\">&times;</span>\r\n");
      out.write("        </button>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-body\">\r\n");
      out.write("        <p>Si vous vous déconnecter, tous vos discussions actuelles seront supprimés</p>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-footer\">\r\n");
      out.write("        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Annuler</button>\r\n");
      out.write("        <button type=\"button\" class=\"btn btn-primary\"  onclick=\"deconnecter()\">Se déconnecter</button>\r\n");
      out.write("      </div>\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("</div>\r\n");
      out.write("				</a>\r\n");
      out.write("				\r\n");
      out.write("			</li>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("		</ul>\r\n");
      out.write("	</nav>\r\n");
      out.write("	</div>\r\n");
      out.write("<!-- // -->\r\n");
      out.write("<div class=\"container-fluid h-100\">\r\n");
      out.write("\r\n");
      out.write("<div class=\"row justify-content-end h-100 vh-100\">\r\n");
      out.write("\r\n");
      out.write("<div class=\"col-md-10 col-xl-8 chat\">\r\n");
      out.write("\r\n");
      out.write("<div class=\"card h-100\">\r\n");
      out.write("\r\n");
      out.write("<div class=\"card-header msg_head\">\r\n");
      out.write("\r\n");
      out.write("<div class=\"d-flex bd-highlight\">\r\n");
      out.write("\r\n");
      out.write("<div class=\"img_cont\">\r\n");
      out.write("\r\n");
      out.write("<a href=\"Show\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img\"></a>\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("<div class=\"user_info\">\r\n");
      out.write("\r\n");
      out.write("<span>");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.nom}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("</span>\r\n");
      out.write("\r\n");
      out.write("<p>");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.email}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("</p>\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("<!-- <div class=\"video_cam\">\r\n");
      out.write("\r\n");
      out.write("<span><i class=\"fas fa-video\" id=\"btn-video\"></i></span>\r\n");
      out.write("\r\n");
      out.write("<span><i class=\"fas fa-phone\" id=\"btn-call\"></i></span>\r\n");
      out.write("\r\n");
      out.write("</div> -->\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("<!-- \r\n");
      out.write("<span id=\"action_menu_btn\"><i class=\"fas fa-ellipsis-v\"></i></span>\r\n");
      out.write(" -->\r\n");
      out.write("<!-- <div class=\"action_menu\">\r\n");
      out.write("\r\n");
      out.write("<ul>\r\n");
      out.write("\r\n");
      out.write("<li><i class=\"fas fa-user-circle\"></i> View profile</li>\r\n");
      out.write("\r\n");
      out.write("<li><i class=\"fas fa-users\"></i> Add to close friends</li>\r\n");
      out.write("\r\n");
      out.write("<li><i class=\"fas fa-plus\"></i> Add to group</li>\r\n");
      out.write("\r\n");
      out.write("<li><i class=\"fas fa-ban\"></i> Block</li>\r\n");
      out.write("\r\n");
      out.write("</ul>\r\n");
      out.write("\r\n");
      out.write("</div> -->\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write(" <div class=\"alert alert-danger w-50 mt-3 d-none\" style=\"margin-left: 130px;\" role=\"alert\" id=\"alert\">\r\n");
      out.write("       </i> Impossible de faire l'appel</i>\r\n");
      out.write("   </div>\r\n");
      out.write("<div class=\"alert alert-danger w-50 mt-3 d-none\" style=\"margin-left: 130px;\" role=\"alert\" id=\"alert2\">\r\n");
      out.write("       </i> le récepteur a refusé l'appel</i>\r\n");
      out.write("  </div>\r\n");
      out.write("\r\n");
      out.write("<div class=\"card-body msg_card_body\" id=\"messageArea\">\r\n");
      out.write("\r\n");
      out.write("<!-- to send -->\r\n");
      out.write("\r\n");
      if (_jspx_meth_c_005fforEach_005f0(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("\r\n");
      out.write(" <video id=\"video\" width=\"600\" height=\"300\" class=\"d-none my-2\"></video>\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("<div class=\"card-footer\">\r\n");
      out.write("\r\n");
      out.write("<form action=\"\" method=\"post\" id=\"myForm\" enctype=\"multipart/form-data\">\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<div class=\"input-group\">\r\n");
      out.write(" <div >\r\n");
      out.write("    <span class=\"input-group-text attach_btn\" id=\"dropdownMenuButton\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"><i class=\"fas fa-paperclip\"></i></span>\r\n");
      out.write("    \r\n");
      out.write("    <div class=\"dropdown m-3\">\r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("    <ul class=\"dropdown-menu dropdown-menu-dark\" aria-labelledby=\"dropdownMenuButton\">\r\n");
      out.write("    \r\n");
      out.write("    <li><a class=\"dropdown-item\" href=\"#\" data-type=\"audio\"><i class=\"fas fa-music\"></i> Audio</a></li>\r\n");
      out.write("    \r\n");
      out.write("    <li> <a class=\"dropdown-item\" href=\"#\" data-type=\"video\"><i class=\"fas fa-video\"></i> Video</a></li>\r\n");
      out.write("    \r\n");
      out.write("    <li> <a class=\"dropdown-item\" href=\"#\" data-type=\"fichier\"><i class=\"fas fa-file\"></i>Fichier</a></li>\r\n");
      out.write("    \r\n");
      out.write("    <li><a class=\"dropdown-item\" href=\"#\" data-type=\"image\"><i class=\"fas fa-image\"></i> Image</a></li>\r\n");
      out.write("    \r\n");
      out.write("    </ul>\r\n");
      out.write("    \r\n");
      out.write("    </div>\r\n");
      out.write("    \r\n");
      out.write("    </div>\r\n");
      out.write("    \r\n");
      out.write("     <input type=\"text\" class=\"form-control type_msg\" name=\"message\" placeholder=\"Type your message...\">\r\n");
      out.write("        \r\n");
      out.write("    <span class=\"input-group-text send_btn\" name=\"ajout\" id=\"send\" onclick=\"validate(null);\" disabled><i class=\"fas fa-location-arrow\"></i></span>\r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("\r\n");
      out.write("<div class=\"input-group-append\">\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write(" \r\n");
      out.write("     ");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<div class=\"input-group-append\">\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<div >\r\n");
      out.write("\r\n");
      out.write("<input type=\"hidden\" name=\"mediaType\" id=\"mediaType\">\r\n");
      out.write("\r\n");
      out.write("<input type=\"hidden\" name=\"mediaUrl\" id=\"mediaUrl\">\r\n");
      out.write("\r\n");
      out.write("<input type=\"hidden\" name=\"mediaUrlR\" id=\"mediaUrlR\">\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("</form>\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("<!-- Button trigger modal\r\n");
      out.write("<button type=\"button\" class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\">\r\n");
      out.write("  Launch demo modal\r\n");
      out.write("</button> -->\r\n");
      out.write("\r\n");
      out.write("<!-- Modal video1 -->\r\n");
      out.write("<div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n");
      out.write("  <div class=\"modal-dialog\">\r\n");
      out.write("    <div class=\"modal-content\">\r\n");
      out.write("      <div class=\"modal-header\">\r\n");
      out.write("        <h5 class=\"modal-title\" id=\"exampleModalLabel\">Demande d'appel</h5>\r\n");
      out.write("        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-footer\">\r\n");
      out.write("        <button type=\"button\" id=\"nonAppel\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">refuser</button>\r\n");
      out.write("        <button type=\"button\" id=\"okAppel\" class=\"btn btn-primary\">accepter</button>\r\n");
      out.write("      </div>\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("</div>\r\n");
      out.write("<!-- /// modal video 2 -->\r\n");
      out.write("<div class=\"modal fade\" id=\"example\" tabindex=\"-1\" aria-labelledby=\"exampleModal\" aria-hidden=\"true\">\r\n");
      out.write("  <div class=\"modal-dialog\">\r\n");
      out.write("    <div class=\"modal-content\">\r\n");
      out.write("      <div class=\"modal-header\">\r\n");
      out.write("        <h5 class=\"modal-title\" id=\"exampleModal\">Video Room</h5>\r\n");
      out.write("        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-body d-flex justify-content-between\">\r\n");
      out.write("        <video id=\"localVideo\" width=\"200\" height=\"200\"></video>\r\n");
      out.write("        <video id=\"remoteVideo\" width=\"200\" height=\"200\"></video>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-footer\">\r\n");
      out.write("        <button type=\"button\" id=\"stopAppel\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Stop l'appel</button>\r\n");
      out.write("      </div>\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("</div>\r\n");
      out.write("<!-- //////////////AUDIO -->\r\n");
      out.write("<!-- Modal audio1 -->\r\n");
      out.write("<div class=\"modal fade\" id=\"audio1\" tabindex=\"-1\" aria-labelledby=\"Label\" aria-hidden=\"true\">\r\n");
      out.write("  <div class=\"modal-dialog\">\r\n");
      out.write("    <div class=\"modal-content\">\r\n");
      out.write("      <div class=\"modal-header\">\r\n");
      out.write("        <h5 class=\"modal-title\" id=\"Label\">Demande d'appel</h5>\r\n");
      out.write("        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-footer\">\r\n");
      out.write("        <button type=\"button\" id=\"nonCall\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">refuser</button>\r\n");
      out.write("        <button type=\"button\" id=\"okCall\" class=\"btn btn-primary\">accepter</button>\r\n");
      out.write("      </div>\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("</div>\r\n");
      out.write("<!-- /// modal audio 2 -->\r\n");
      out.write("<div class=\"modal fade\" id=\"audio2\" tabindex=\"-1\" aria-labelledby=\"ex\" aria-hidden=\"true\">\r\n");
      out.write("  <div class=\"modal-dialog\">\r\n");
      out.write("    <div class=\"modal-content\">\r\n");
      out.write("      <div class=\"modal-header\">\r\n");
      out.write("        <h5 class=\"modal-title\" id=\"ex\">Appel Room</h5>\r\n");
      out.write("        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-body d-flex justify-content-between\">\r\n");
      out.write("        <audio id=\"localAudio\" width=\"200\" height=\"200\"></audio>\r\n");
      out.write("        <audio id=\"remoteAudio\" width=\"200\" height=\"200\"></audio>\r\n");
      out.write("      </div>\r\n");
      out.write("      <div class=\"modal-footer\">\r\n");
      out.write("        <button type=\"button\" id=\"stopCall\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Stop l'appel</button>\r\n");
      out.write("      </div>\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("</div>\r\n");
      out.write("<!-- Load Bootstrap JS and jQuery -->\r\n");
      out.write("	<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\r\n");
      out.write("	<script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\"></script>\r\n");
      out.write("    <script src=\"https://code.jquery.com/jquery-3.5.1.js\"></script>\r\n");
      out.write("    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js\" ></script>  \r\n");
      out.write("    <!--  <script src=\"https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js\"></script> -->\r\n");
      out.write("     \r\n");
      out.write("<p id=\"id\" class=\"d-none\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${id}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("</p>\r\n");
      out.write("<p id=\"id_rec\" class=\"d-none\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${id_rec}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("</p>\r\n");
      out.write("	\r\n");
      out.write("                  \r\n");
      out.write("	<script>\r\n");
      out.write("	/////WEB SOCKETS\r\n");
      out.write("	let id=document.getElementById(\"id\").textContent;\r\n");
      out.write("	var cpt=10000;\r\n");
      out.write("	const queryString = window.location.search;\r\n");
      out.write("	const urlParams = new URLSearchParams(queryString);\r\n");
      out.write("/* 	 var peer1;\r\n");
      out.write("	 var peer = new Peer(id);\r\n");
      out.write("	 peer.on(\"open\", idp=>{\r\n");
      out.write("		 \r\n");
      out.write("  	   peer1=idp;\r\n");
      out.write("  	   console.log(\"open peer! \"+peer1);\r\n");
      out.write("  	 \r\n");
      out.write("  	 \r\n");
      out.write("	 });  */\r\n");
      out.write("	 var socket = new WebSocket(\"ws://localhost:8081/WebChat/ServerEndPoint?userID=\"+id+\"=\"+urlParams.get('id'));\r\n");
      out.write("	 socket.onopen = function(e) {\r\n");
      out.write("		 document.getElementById('send').removeAttribute(\"disabled\");\r\n");
      out.write("		  console.log(\"[open] Connection established\");\r\n");
      out.write("		 \r\n");
      out.write("		};\r\n");
      out.write("	\r\n");
      out.write("		\r\n");
      out.write("		socket.onmessage=function(event){\r\n");
      out.write("			\r\n");
      out.write("			  const Data = event.data;\r\n");
      out.write("			  var objectR = JSON.parse(Data);\r\n");
      out.write("			  \r\n");
      out.write("			  var data = \"contenu=\" + encodeURIComponent(objectR.content);\r\n");
      out.write("			  var xhr = new XMLHttpRequest();\r\n");
      out.write("			   xhr.open('POST', 'http://localhost:8081/WebChat/AjaxCall3',true);\r\n");
      out.write("			   xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n");
      out.write("			   xhr.onload = function() {\r\n");
      out.write("			     if (xhr.status === 200) {\r\n");
      out.write("			  	  \r\n");
      out.write("			  	   valeur = xhr.responseText;\r\n");
      out.write("					//  console.log('nouveau message arrive de '+objectR.recepteurId +\" msg \"+objectR.content);\r\n");
      out.write("					 // console.log('longeur msg '+objectR.content.length);\r\n");
      out.write("					  var messageElement = document.createElement('div');\r\n");
      out.write("						//messageElement.classList.add('alert', 'alert-success');\r\n");
      out.write("						\r\n");
      out.write("					  if (objectR.type === 'text') { \r\n");
      out.write("						    console.log('Variable is a text');   \r\n");
      out.write("						    messageElement.id=\"text\"+cpt;\r\n");
      out.write("						    messageElement.innerHTML = '<div class=\"msg_cotainer_send\"><i class=\"fas fa-download text-primary mx-2 px-3\"   onclick=\"downloadText('+cpt+')\"></i>'+valeur+'</div><div class=\"img_cont_msg\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img_msg\"></div>';\r\n");
      out.write("						    messageElement.classList.add('d-flex');\r\n");
      out.write("							 messageElement.classList.add('justify-content-end');\r\n");
      out.write("							 messageElement.classList.add('mb-4');\r\n");
      out.write("						    //messageElement.innerHTML = objectR.content+'<i class=\"fas fa-download\"   onclick=\"downloadText('+cpt+')\"></i>';\r\n");
      out.write("							cpt++;\r\n");
      out.write("						}\r\n");
      out.write("					  \r\n");
      out.write("					  else if(objectR.type=== 'video') {\r\n");
      out.write("						  var contenu =valeur;\r\n");
      out.write("						  console.log('apres longeur msg '+contenu+\" \"+contenu.length);\r\n");
      out.write("						     messageElement.innerHTML = '<div class=\"msg_cotainer_send\"><video class=\"w-100 mb-3 \" controls><source src=\"' +contenu + '\"></video><a href=\"'+contenu+'\" download><i class=\"fas fa-download\"></i></a></div><div class=\"img_cont_msg\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img_msg\"></div>';\r\n");
      out.write("							\r\n");
      out.write("						     console.log(\"Je suis un contenu: \"+contenu);\r\n");
      out.write("						     messageElement.classList.add('d-flex');\r\n");
      out.write("							 messageElement.classList.add('justify-content-end');\r\n");
      out.write("							 messageElement.classList.add('mb-4');\r\n");
      out.write("						  //\r\n");
      out.write("						 \r\n");
      out.write("						//	messageElement.innerHTML = '<video class=\"w-50 mb-3 h-50\" controls><source src=\"' +contenu+ '\"></video><a href=\"'+contenu+'\" download><i class=\"fas fa-download\"></i></a>';\r\n");
      out.write("			              } else if (objectR.type === 'audio') {\r\n");
      out.write("			            	  console.log(\"audio \"+valeur);\r\n");
      out.write("			            	  var contenu =valeur;  //.substring(0,objectR.content.length-2);\r\n");
      out.write("			            	  console.log('apres longeur msg '+contenu+\" \"+contenu.length);\r\n");
      out.write("			            	  console.log(\"aprés sub \"+contenu);\r\n");
      out.write("			            	  messageElement.innerHTML = '<div class=\"msg_cotainer_send\"><audio class=\"w-100 mb-3 h-50\" controls><source src=\"' +contenu+ '\"></audio><a href=\"'+contenu+'\" download><i class=\"fas fa-download\"></i></a></div><div class=\"img_cont_msg\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img_msg\"></div>';\r\n");
      out.write("								 messageElement.classList.add('d-flex');\r\n");
      out.write("								 messageElement.classList.add('justify-content-end');\r\n");
      out.write("								 messageElement.classList.add('mb-4');\r\n");
      out.write("			            	  //\r\n");
      out.write("			            	\r\n");
      out.write("			            	 // messageElement.innerHTML = '<audio class=\"w-50 mb-3 h-50\" controls><source src=\"' +contenu+ '\"></audio><a href=\"'+contenu+'\" download><i class=\"fas fa-download\"></i></a>';\r\n");
      out.write("			              }else if (objectR.type === 'fichier') {\r\n");
      out.write("			            	  \r\n");
      out.write("			            	  console.log(\"fichier\");\r\n");
      out.write("			            	  var contenu =valeur;  //.substring(0,objectR.content.length-2);\r\n");
      out.write("			            	  console.log('apres longeur msg '+contenu+\" \"+contenu.length);\r\n");
      out.write("			            	  messageElement.innerHTML = '<div class=\"msg_cotainer_send\"><embed class=\"mb-3 w-100\" src=\"'+contenu+'\" height=\"375\"  type=\"application/pdf\"><a href=\"'+contenu+'\" download><i class=\"fas fa-download\"></i></a></div><div class=\"img_cont_msg\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img_msg\"></div>';\r\n");
      out.write("								 messageElement.classList.add('d-flex');\r\n");
      out.write("								 messageElement.classList.add('justify-content-end');\r\n");
      out.write("								 messageElement.classList.add('mb-4');\r\n");
      out.write("			            	  //\r\n");
      out.write("			            	 // messageElement.innerHTML = '<embed class=\"mb-3\" src=\"'+contenu+'\" width=\"500\" height=\"375\"  type=\"application/pdf\"><a href=\"'+contenu+'\" download><i class=\"fas fa-download\"></i></a>';\r\n");
      out.write("			              } else {\r\n");
      out.write("			            	  console.log(\"image\");\r\n");
      out.write("			            	  \r\n");
      out.write("			            	  var contenu =valeur;  //.substring(0,objectR.content.length-2);\r\n");
      out.write("			            	  //const blob = new Blob(['C:/Users/HP/Web-workspace/WebChat/src/main/webapp/'+contenu], {type: 'image/jpeg'});\r\n");
      out.write("\r\n");
      out.write("			            	  // Create a new URL object from the Blob\r\n");
      out.write("			            	 // const url = URL.createObjectURL(blob);\r\n");
      out.write("			            	  console.log('apres longeur msg '+contenu+\" \"+contenu.length);\r\n");
      out.write("			            	  messageElement.innerHTML = '<div class=\"msg_cotainer_send\"><img class=\"w-100\" src=\"'+contenu+'\"/><a href=\"'+contenu+'\" download><i class=\"fas fa-download\"></i></a></div><div class=\"img_cont_msg\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img_msg\"></div>';\r\n");
      out.write("								 messageElement.classList.add('d-flex');\r\n");
      out.write("								 messageElement.classList.add('justify-content-end');\r\n");
      out.write("								 messageElement.classList.add('mb-4');\r\n");
      out.write("			            	  //\r\n");
      out.write("			            	//  var contenu =objectR.content.substring(0,objectR.content.length-2);\r\n");
      out.write("			            	  //messageElement.innerHTML = '<img class=\"w-50 mb-3 h-50\" src=\"' +contenu+ '\"/><a href=\"'+contenu+'\" download><i class=\"fas fa-download\"></i></a>';\r\n");
      out.write("			              }\r\n");
      out.write("					  var messageArea = document.getElementById('messageArea');	\r\n");
      out.write("					  messageArea.appendChild(messageElement); \r\n");
      out.write("			     }\r\n");
      out.write("			   }\r\n");
      out.write("			   xhr.send(data); \r\n");
      out.write("		\r\n");
      out.write("		}\r\n");
      out.write("		// CLOSE\r\n");
      out.write("		socket.onclose=function(){\r\n");
      out.write("			console.log(\"cloosed!\");\r\n");
      out.write("		}\r\n");
      out.write("		\r\n");
      out.write("		// DECONNECTER\r\n");
      out.write("		function deconnecter(){\r\n");
      out.write("			socket.close();\r\n");
      out.write("			 window.location.href = 'http://localhost:8081/WebChat/Login';\r\n");
      out.write("		}\r\n");
      out.write("		\r\n");
      out.write("		// ERROR\r\n");
      out.write("		socket.onerror = function(error) {\r\n");
      out.write("			  console.log(error);\r\n");
      out.write("		};\r\n");
      out.write("    //******************** END WEB SOCKETS*************************************************\r\n");
      out.write("	   /*  send Message */\r\n");
      out.write("		function sendMessage(type,url,file) {\r\n");
      out.write("			console.log('ana f send message .');\r\n");
      out.write("			const queryString = window.location.search;\r\n");
      out.write("			const urlParams = new URLSearchParams(queryString);\r\n");
      out.write("		  // console.log('im here'+urlParams.get('id'));\r\n");
      out.write("			var messageElement = document.createElement('div');\r\n");
      out.write("			 var val=document.querySelector('input[type=\"text\"]').value;\r\n");
      out.write("		  if(type=='text'){\r\n");
      out.write("			  console.log('text');\r\n");
      out.write("			  if(val!==\"\"){\r\n");
      out.write("				\r\n");
      out.write("				     messageElement.innerHTML = '<div class=\"img_cont_msg\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_rec.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img_msg\"></div><div class=\"msg_cotainer\">'+val+'</div>';\r\n");
      out.write("					 messageElement.classList.add('d-flex');\r\n");
      out.write("					 messageElement.classList.add('justify-content-start');\r\n");
      out.write("					 messageElement.classList.add('mb-4');\r\n");
      out.write("					 \r\n");
      out.write("					 //\r\n");
      out.write("					 var data = \"contenu=\" + encodeURIComponent(val);\r\n");
      out.write("					// var formData1 = new FormData();\r\n");
      out.write("				//	formData1.append(\"message\", val);\r\n");
      out.write("					 var xhr = new XMLHttpRequest();\r\n");
      out.write("	                 xhr.open('POST', 'http://localhost:8081/WebChat/MsgEncrypt');\r\n");
      out.write("	                 xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n");
      out.write("	                 xhr.onload = function() {\r\n");
      out.write("	                 if (xhr.status === 200) {\r\n");
      out.write("	    	         var encryptMsg=xhr.responseText;\r\n");
      out.write("	    	         var message = {\r\n");
      out.write("							    \"recepteurId\": urlParams.get('id'),\r\n");
      out.write("							    \"content\": encryptMsg,\r\n");
      out.write("							    \"type\" : type\r\n");
      out.write("							  };\r\n");
      out.write("					 var messageJSON = JSON.stringify(message);\r\n");
      out.write("					 console.log(\"messageJSON: \"+messageJSON);\r\n");
      out.write("					 socket.send(messageJSON); \r\n");
      out.write("					 console.log(\"sent nn\"+val.length);\r\n");
      out.write("	    	     //   console.log('Response text:', responseAjax);\r\n");
      out.write("	    	      \r\n");
      out.write("	                 } else {\r\n");
      out.write("	    	             console.log('Error:', xhr.status);\r\n");
      out.write("	                 }\r\n");
      out.write("	               }; \r\n");
      out.write("	              // xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n");
      out.write("	               xhr.send(data);  \r\n");
      out.write("	                /// FIN AJAX \r\n");
      out.write("			//*********************\r\n");
      out.write("					\r\n");
      out.write("			  }\r\n");
      out.write("		 }else{\r\n");
      out.write("			if (type === 'video') {\r\n");
      out.write("				messageElement.innerHTML = '<div class=\"img_cont_msg\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_rec.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img_msg\"></div><div class=\"msg_cotainer\"><video class=\"w-100\" controls><source src=\"' + url + '\"></video></div>';\r\n");
      out.write("				 messageElement.classList.add('d-flex');\r\n");
      out.write("				 messageElement.classList.add('justify-content-start');\r\n");
      out.write("				 messageElement.classList.add('mb-4');\r\n");
      out.write("				//\r\n");
      out.write("				//messageElement.innerHTML = '<video class=\"w-50 h-50\" controls><source src=\"' + url + '\"></video>';\r\n");
      out.write("              } else if (type === 'audio') {\r\n");
      out.write("            	  messageElement.innerHTML = '<div class=\"img_cont_msg\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_rec.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img_msg\"></div><div class=\"msg_cotainer\"><audio class=\"w-100\" controls><source src=\"' + url + '\"></audio></div>';\r\n");
      out.write("  				 messageElement.classList.add('d-flex');\r\n");
      out.write("  				 messageElement.classList.add('justify-content-start');\r\n");
      out.write("  				 messageElement.classList.add('mb-4');\r\n");
      out.write("            	 // messageElement.innerHTML = '<audio class=\"w-50 h-50\" controls><source src=\"' + url + '\"></audio>';\r\n");
      out.write("              }else if (type === 'fichier') {\r\n");
      out.write("            	  messageElement.innerHTML = '<div class=\"img_cont_msg\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_rec.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img_msg\"></div><div class=\"msg_cotainer\"><embed class=\"mb-3\" src=\"'+url+'\" width=\"500\" height=\"375\"  type=\"application/pdf\"></div>';\r\n");
      out.write("   				 messageElement.classList.add('d-flex');\r\n");
      out.write("   				 messageElement.classList.add('justify-content-start');\r\n");
      out.write("   				 messageElement.classList.add('mb-4');\r\n");
      out.write("            	 // messageElement.innerHTML = '<embed class=\"mb-3\" src=\"'+url+'\" width=\"500\" height=\"375\"  type=\"application/pdf\">';\r\n");
      out.write("              } else {\r\n");
      out.write("            	  messageElement.innerHTML = '<div class=\"img_cont_msg\"><img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_rec.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" class=\"rounded-circle user_img_msg\"></div><div class=\"msg_cotainer\"><img class=\"w-100 h-50\" src=\"' + url + '\"/></div>';\r\n");
      out.write("    				 messageElement.classList.add('d-flex');\r\n");
      out.write("    				 messageElement.classList.add('justify-content-start');\r\n");
      out.write("    				 messageElement.classList.add('mb-4');\r\n");
      out.write("            	 // messageElement.innerHTML = '<img class=\"w-50 h-50\" src=\"' + url + '\"/>';\r\n");
      out.write("              }\r\n");
      out.write("			  var formData = new FormData();\r\n");
      out.write("			if(file==null){\r\n");
      out.write("				const fileInput = document.getElementById('file');\r\n");
      out.write("				var file_input =fileInput.files[0];\r\n");
      out.write("				console.log(\"file_input :\"+file_input);\r\n");
      out.write("				document.body.removeChild(fileInput); \r\n");
      out.write("				 formData.append(\"message\", file_input);\r\n");
      out.write("			}\r\n");
      out.write("			else{\r\n");
      out.write("				if(type=='audio'){\r\n");
      out.write("					console.log(\"file audio \"+file);\r\n");
      out.write("					const timestamp = new Date().getTime();\r\n");
      out.write("					const filename = 'audio_' + timestamp + '.mp3';\r\n");
      out.write("					formData.append(\"message\", file, filename);\r\n");
      out.write("				}// image\r\n");
      out.write("				else{\r\n");
      out.write("					console.log(\"file image\"+file);\r\n");
      out.write("					const timestamp = new Date().getTime();\r\n");
      out.write("					const filename = 'image_' + timestamp + '.jpeg';\r\n");
      out.write("					formData.append(\"message\", file, filename);\r\n");
      out.write("				}\r\n");
      out.write("				\r\n");
      out.write("			}\r\n");
      out.write("			//console.log(fileInput.files[0]);\r\n");
      out.write("			//**********************\r\n");
      out.write("			 // SEND SERVER AJAX\r\n");
      out.write("	      \r\n");
      out.write("          \r\n");
      out.write("	     // const data = new URLSearchParams(new FormData(form));\r\n");
      out.write("	      console.log(formData);\r\n");
      out.write("	      console.log('call ajax .');\r\n");
      out.write("	     var xhr = new XMLHttpRequest();\r\n");
      out.write("	     xhr.open('POST', 'http://localhost:8081/WebChat/AjaxCall');\r\n");
      out.write("	     xhr.onload = function() {\r\n");
      out.write("	       if (xhr.status === 200) {\r\n");
      out.write("	    	   var responseAjax=xhr.responseText;\r\n");
      out.write("	    	   console.log('Response text:', responseAjax);\r\n");
      out.write("	    	   var message = {\r\n");
      out.write("					    \"recepteurId\": urlParams.get('id'),\r\n");
      out.write("					    \"content\": responseAjax,\r\n");
      out.write("					    \"type\" : type\r\n");
      out.write("					  };\r\n");
      out.write("	    	   var messageJSON = JSON.stringify(message);\r\n");
      out.write("				 console.log(\"messageJSON: \"+messageJSON);\r\n");
      out.write("				 socket.send(messageJSON); \r\n");
      out.write("				 console.log(\"sent nn\"+message.content.length);\r\n");
      out.write("	       } else {\r\n");
      out.write("	    	   console.log('Error:', xhr.status);\r\n");
      out.write("	       }\r\n");
      out.write("	     }; \r\n");
      out.write("	    // xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n");
      out.write("	     xhr.send(formData); \r\n");
      out.write("	     /// FIN AJAX \r\n");
      out.write("			//*********************\r\n");
      out.write("	}\r\n");
      out.write("	     \r\n");
      out.write("		   var messageArea = document.getElementById('messageArea');	\r\n");
      out.write("			messageArea.appendChild(messageElement);\r\n");
      out.write("			document.querySelector('input[type=\"text\"]').value = '';\r\n");
      out.write("			\r\n");
      out.write("			// var btnSend = document.getElementById('send');\r\n");
      out.write("           //  btn.onclick=\"sendMessage('text','')\";\r\n");
      out.write("			 var inputHidden = document.getElementById('mediaType');\r\n");
      out.write("             var UrlHidden = document.getElementById('mediaUrl');\r\n");
      out.write("             var UrlHiddenR = document.getElementById('mediaUrlR');\r\n");
      out.write("             UrlHidden.value=\"\";\r\n");
      out.write("             inputHidden.value=\"\";\r\n");
      out.write("             UrlHiddenR.value=\"\";\r\n");
      out.write("		}\r\n");
      out.write("		////////////////////Validate/////////////////////////////////////////\r\n");
      out.write("		      function validate(file){\r\n");
      out.write("		    	  console.log(' ana f validate.');\r\n");
      out.write("                var inputHidden = document.getElementById('mediaType');\r\n");
      out.write("                var UrlHidden = document.getElementById('mediaUrl');\r\n");
      out.write("               \r\n");
      out.write("    	        var url = UrlHidden.value;\r\n");
      out.write("    	        var type= inputHidden.value;\r\n");
      out.write("    	      \r\n");
      out.write("    	        if(url==\"\"){\r\n");
      out.write("    	        	 sendMessage('text','');\r\n");
      out.write("    	        }\r\n");
      out.write("    	        else{\r\n");
      out.write("    	        	console.log('send message call.');\r\n");
      out.write("    	        	sendMessage(type,url,file);\r\n");
      out.write("    	        }\r\n");
      out.write("\r\n");
      out.write("            }\r\n");
      out.write("		\r\n");
      out.write("		///////////////////\r\n");
      out.write("		/* dropdown */\r\n");
      out.write("	  var dropdownItems = document.querySelectorAll('.dropdown-item');\r\n");
      out.write("      dropdownItems.forEach(function(item) {\r\n");
      out.write("    	  \r\n");
      out.write("        item.addEventListener('click', function(event) {\r\n");
      out.write("          event.preventDefault();\r\n");
      out.write("          console.log('hi');\r\n");
      out.write("          var type = this.getAttribute('data-type');\r\n");
      out.write("          var input = document.createElement('input');\r\n");
      out.write("          input.type = 'file';\r\n");
      out.write("          input.id=\"file\";\r\n");
      out.write("          if(type==\"fichier\"){\r\n");
      out.write("        	  input.accept = '.txt,.pdf';\r\n");
      out.write("          }else{\r\n");
      out.write("        	  input.accept = type + '/*';\r\n");
      out.write("          }\r\n");
      out.write("          input.style.display = 'none';\r\n");
      out.write("          document.body.appendChild(input);\r\n");
      out.write("          \r\n");
      out.write("          input.addEventListener('change', function() {\r\n");
      out.write("            var file = this.files[0];\r\n");
      out.write("           // console.log(file);\r\n");
      out.write("            if (file) {\r\n");
      out.write("                var url = URL.createObjectURL(file);\r\n");
      out.write("                var inputHidden = document.getElementById('mediaType');\r\n");
      out.write("                var UrlHidden = document.getElementById('mediaUrl');\r\n");
      out.write("                var UrlHiddenR = document.getElementById('mediaUrlR');\r\n");
      out.write("                UrlHidden.value=url;\r\n");
      out.write("                inputHidden.value=type;\r\n");
      out.write("              }  \r\n");
      out.write("          });\r\n");
      out.write("          \r\n");
      out.write("          input.click();\r\n");
      out.write("        });\r\n");
      out.write("        \r\n");
      out.write("      });\r\n");
      out.write("      ///////////////////////////////////////////////////////////////////\r\n");
      out.write("      // quit page\r\n");
      out.write("\r\n");
      out.write("  /*   window.addEventListener(\"beforeunload\", async function(event) {\r\n");
      out.write("    // Call the AJAX servlet\r\n");
      out.write("    const urlParams = new URLSearchParams(window.location.search);\r\n");
      out.write("    id=urlParams.get('id');\r\n");
      out.write("    var xhr2 = new XMLHttpRequest();\r\n");
      out.write("    xhr2.open(\"GET\", \"http://192.168.8.164:8081/WebChat/AjaxCall?id=\"+id, false); \r\n");
      out.write("    console.log(\"i'm quit\");\r\n");
      out.write("    xhr2.send();\r\n");
      out.write("    console.log(\"send request \");\r\n");
      out.write("    await new Promise(resolve => setTimeout(resolve, 1000)); \r\n");
      out.write("}); */\r\n");
      out.write("window.addEventListener(\"beforeunload\", function(event) {\r\n");
      out.write("    // Call the AJAX servlet using sendBeacon()\r\n");
      out.write("    id2=document.getElementById('id').textContent;\r\n");
      out.write("    const urlParams = new URLSearchParams(window.location.search);\r\n");
      out.write("    id=urlParams.get('id');\r\n");
      out.write("    const url = 'http://localhost:8081/WebChat/AjaxCall2?id='+id+'&id2='+id2;\r\n");
      out.write("    console.log(\"i'm quit\");\r\n");
      out.write("    navigator.sendBeacon(url);\r\n");
      out.write("    console.log(\"i'm quit\");\r\n");
      out.write("   // navigator.sendBeacon('http://192.168.8.164:8081/WebChat/AjaxCall?id='+id, data);\r\n");
      out.write("});\r\n");
      out.write("//\r\n");
      out.write("      \r\n");
      out.write("     function downloadText(id) {\r\n");
      out.write("    	 console.log(\"id : \"+id);\r\n");
      out.write("    	  const text = document.getElementById('text'+id).textContent;\r\n");
      out.write("    	  console.log(text);\r\n");
      out.write("    	  const filename = 'myTextImage.txt';\r\n");
      out.write("    	  const blob = new Blob([text], { type: 'text/plain' });\r\n");
      out.write("    	  const link = document.createElement('a');\r\n");
      out.write("    	  link.href = URL.createObjectURL(blob);\r\n");
      out.write("    	  link.download = filename;\r\n");
      out.write("    	  document.body.appendChild(link);\r\n");
      out.write("    	  link.click();\r\n");
      out.write("    	  document.body.removeChild(link);\r\n");
      out.write("    	}\r\n");
      out.write("     \r\n");
      out.write("     \r\n");
      out.write("  /*     ///RECORD AUDIO\r\n");
      out.write("     var isRecording = false;\r\n");
      out.write("    var startTime;\r\n");
      out.write("    var TimeInterval;\r\n");
      out.write("  var mediaRecorder;\r\n");
      out.write("var chunks = [];\r\n");
      out.write("const recordBtn = document.getElementById('recordBtn');\r\n");
      out.write("const stopBtn = document.getElementById('stopBtn'); */\r\n");
      out.write("/* function startRecording() { \r\n");
      out.write("	recordBtn.addEventListener('click', function() {\r\n");
      out.write("		console.log(\"click start ....\");\r\n");
      out.write("		\r\n");
      out.write("		if (isRecording) {\r\n");
      out.write("	        // Stop recording\r\n");
      out.write("	       \r\n");
      out.write("	      } else {\r\n");
      out.write("	        // Start recording\r\n");
      out.write("	        isRecording = true;\r\n");
      out.write("	        startTime = new Date().getTime();\r\n");
      out.write("	        console.log(\"startTime\" +startTime);\r\n");
      out.write("	        document.getElementById(\"recordBtn\").classList.remove(\"text-light\");\r\n");
      out.write("	        document.getElementById(\"recordBtn\").classList.add(\"text-success\");\r\n");
      out.write("	        document.getElementById(\"stopBtn\").classList.remove(\"d-none\");\r\n");
      out.write("	        TimeInterval = setInterval(updateTime, 1000);\r\n");
      out.write("	        console.log(\"Recording started.\");\r\n");
      out.write("	        \r\n");
      out.write("	      //µµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµµ\r\n");
      out.write("		    \r\n");
      out.write("	        navigator.mediaDevices.getUserMedia({audio: true}).then(function(stream) {\r\n");
      out.write("				  mediaRecorder = new MediaRecorder(stream);\r\n");
      out.write("				  console.log(\"mediaRecorder \"+mediaRecorder);\r\n");
      out.write("				  \r\n");
      out.write("				  mediaRecorder.start();\r\n");
      out.write("				  console.log('Recording started...'); \r\n");
      out.write("				  \r\n");
      out.write("				  mediaRecorder.addEventListener('start', function() {\r\n");
      out.write("					  console.log('Recording started.capturing..');\r\n");
      out.write("					  mediaRecorder.addEventListener('dataavailable', function(event) {\r\n");
      out.write("						    console.log(\"event\" +event);\r\n");
      out.write("						    chunks=[];\r\n");
      out.write("						    chunks.push(event.data);\r\n");
      out.write("						  });\r\n");
      out.write("					});\r\n");
      out.write("				\r\n");
      out.write("				}).catch(function(err) {\r\n");
      out.write("				  console.log('Error: ' + err);\r\n");
      out.write("				});\r\n");
      out.write("	      }\r\n");
      out.write("		\r\n");
      out.write("		  });\r\n");
      out.write("		  \r\n");
      out.write("	  stopBtn.addEventListener('click', function() {\r\n");
      out.write("		   if(mediaRecorder){\r\n");
      out.write("			   mediaRecorder.stop();\r\n");
      out.write("			    isRecording = false;\r\n");
      out.write("		        clearInterval(TimeInterval);\r\n");
      out.write("		       // var duration = new Date().getTime() - startTime;\r\n");
      out.write("		        document.getElementById(\"recordBtn\").classList.remove(\"text-success\");\r\n");
      out.write("		        document.getElementById(\"recordBtn\").classList.add(\"text-light\");\r\n");
      out.write("		        document.getElementById(\"recordBtn\").textContent = \"\";\r\n");
      out.write("		        document.getElementById(\"stopBtn\").classList.add(\"d-none\");\r\n");
      out.write("		      //  console.log(\"Recording stopped. Duration: \" + duration + \"ms\");\r\n");
      out.write("			    console.log('Recording stopped.');\r\n");
      out.write("			    mediaRecorder.addEventListener('stop', function() {\r\n");
      out.write("			    const audioBlob = new Blob(chunks, { 'type' : 'audio/mpeg' });\r\n");
      out.write("			    console.log('create audio.');\r\n");
      out.write("			    const audioUrl = URL.createObjectURL(audioBlob);\r\n");
      out.write("			    //**\r\n");
      out.write("	              var inputHidden = document.getElementById('mediaType');\r\n");
      out.write("	              var UrlHidden = document.getElementById('mediaUrl');\r\n");
      out.write("	              var UrlHiddenR = document.getElementById('mediaUrlR');\r\n");
      out.write("	              UrlHidden.value=audioUrl;\r\n");
      out.write("	              inputHidden.value='audio';\r\n");
      out.write("			    //**\r\n");
      out.write("			    console.log(\"validate call\")\r\n");
      out.write("			     console.log('validate call.');\r\n");
      out.write("			    validate(audioBlob);\r\n");
      out.write("			 \r\n");
      out.write("			\r\n");
      out.write("			    \r\n");
      out.write("\r\n");
      out.write("		   });\r\n");
      out.write("		  };\r\n");
      out.write("	});\r\n");
      out.write("	\r\n");
      out.write("\r\n");
      out.write("    // Function to update time on recording icon\r\n");
      out.write("    function updateTime() {\r\n");
      out.write("      var Time = new Date().getTime() - startTime;\r\n");
      out.write("      console.log(\"elapsedTime \"+Time);\r\n");
      out.write("      var seconds = Math.floor(Time / 1000);\r\n");
      out.write("      var minutes = Math.floor(seconds / 60);\r\n");
      out.write("      seconds = seconds % 60;\r\n");
      out.write("      document.getElementById(\"recordBtn\").textContent = minutes + \":\" + (seconds < 10 ? \"0\" : \"\") + seconds;\r\n");
      out.write("    }\r\n");
      out.write(" \r\n");
      out.write(" //  PHOTO\r\n");
      out.write(" const streamBtn = document.getElementById('stream');\r\n");
      out.write(" const takeBtn = document.getElementById('take');\r\n");
      out.write(" const video = document.getElementById('video');\r\n");
      out.write(" const canvas = document.getElementById('canvas');\r\n");
      out.write(" const context = canvas.getContext('2d');\r\n");
      out.write("\r\n");
      out.write(" streamBtn.addEventListener('click', function(){\r\n");
      out.write("	 console.log(\"click photo\");\r\n");
      out.write("	 video.classList.remove(\"d-none\");\r\n");
      out.write("	 takeBtn.classList.remove(\"d-none\");\r\n");
      out.write("	 navigator.mediaDevices.getUserMedia({ video: true })\r\n");
      out.write("	  .then(stream => {\r\n");
      out.write("		  console.log(\"stream video...\");\r\n");
      out.write("		  video.srcObject = stream;\r\n");
      out.write("	    video.play();\r\n");
      out.write("	  })\r\n");
      out.write("	  .catch(error => {\r\n");
      out.write("	    console.error('Error accessing user media:', error);\r\n");
      out.write("	  });\r\n");
      out.write(" });\r\n");
      out.write(" takeBtn.addEventListener('click', function(){\r\n");
      out.write("	 takeBtn.classList.add(\"d-none\");\r\n");
      out.write("	 console.log(\"take photo\");\r\n");
      out.write("	 video.pause();\r\n");
      out.write("	  video.classList.add(\"d-none\");\r\n");
      out.write("	 console.log(\"video pause..\");\r\n");
      out.write("	 \r\n");
      out.write("	  canvas.width = 200;\r\n");
      out.write("	  canvas.height = 200;\r\n");
      out.write("	  context.imageSmoothingQuality = 0.5;\r\n");
      out.write("	  context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n");
      out.write("	 \r\n");
      out.write("	  const imageData = canvas.toDataURL('image/jpeg',0.5);\r\n");
      out.write("	 \r\n");
      out.write("	  console.log(\"put image\");\r\n");
      out.write("	\r\n");
      out.write("	   if (video.srcObject  && video.srcObject.getTracks) {\r\n");
      out.write("		   console.log(\"stream found\");\r\n");
      out.write("		   video.srcObject.getTracks().forEach(function(track) {\r\n");
      out.write("            track.stop();\r\n");
      out.write("          });\r\n");
      out.write("        };\r\n");
      out.write("	\r\n");
      out.write("	   //-----------------------------\r\n");
      out.write("	   var inputHidden = document.getElementById('mediaType');\r\n");
      out.write("       var UrlHidden = document.getElementById('mediaUrl');\r\n");
      out.write("       var UrlHiddenR = document.getElementById('mediaUrlR');\r\n");
      out.write("       UrlHidden.value= imageData;;\r\n");
      out.write("       inputHidden.value='image';\r\n");
      out.write("//**\r\n");
      out.write("       console.log('validate call.');\r\n");
      out.write("		  canvas.toBlob(function(blob) {\r\n");
      out.write("			  validate(blob);\r\n");
      out.write("	    });\r\n");
      out.write("		  //----------------------------\r\n");
      out.write("	 \r\n");
      out.write(" }); */\r\n");
      out.write("\r\n");
      out.write("///////////VIDEO\r\n");
      out.write("      \r\n");
      out.write("      /*  var localStream;\r\n");
      out.write("       const inputLocalPeerId=peer1;\r\n");
      out.write("       var inputRemotePeerId;\r\n");
      out.write("       var ok; */\r\n");
      out.write("     //  const stopBtn=document.getElementById(\"stop\");\r\n");
      out.write("      /*  var idf=document.getElementById('id_rec').textContent;\r\n");
      out.write("       var idm=document.getElementById(\"id\").textContent;\r\n");
      out.write("       console.log(\"idf :\"+idf+\" idm : \"+idm);\r\n");
      out.write("       inputRemotePeerId=idf;\r\n");
      out.write("       console.log(\"inputRemotePeerId :\"+inputRemotePeerId);\r\n");
      out.write("       const btnCall=document.getElementById(\"btn-video\");\r\n");
      out.write("       const okAppel=document.getElementById(\"okAppel\");\r\n");
      out.write("       const nonAppel=document.getElementById(\"nonAppel\");\r\n");
      out.write("    	   btnCall.addEventListener(\"click\", function(){    \r\n");
      out.write("    		   console.log(\"clicked call!\");\r\n");
      out.write("    		   //-------------------------------------------\r\n");
      out.write("    		   var xhr3 = new XMLHttpRequest();\r\n");
      out.write("    		     xhr3.open('POST', \"AppelVideo?idf=\"+idf+\"&idm=\"+idm);\r\n");
      out.write("    		     xhr3.onload = function() {\r\n");
      out.write("    		       if (xhr3.status === 200) {\r\n");
      out.write("    		    	   ok=xhr3.responseText; \r\n");
      out.write("    		    	   console.log('Response text peer:'+ ok+ \"bool \"+(ok==1));\r\n");
      out.write("    		    	   //---------------------------------------------\r\n");
      out.write(" \r\n");
      out.write("    	    		   if(ok==1){\r\n");
      out.write("    	    			   console.log(\"ok=1\");\r\n");
      out.write("    	    			   $('#example').modal('show'); \r\n");
      out.write("    	        	       const remotePeerId=inputRemotePeerId;\r\n");
      out.write("    	                  navigator.mediaDevices.getUserMedia({video : true}).then(stream => {\r\n");
      out.write("    	               	   localStream=stream;\r\n");
      out.write("    	               	   const videoElement = document.getElementById(\"localVideo\");\r\n");
      out.write("    	               	   videoElement.srcObject=localStream;\r\n");
      out.write("    	               	   videoElement.onloadedmetadata=()=>videoElement.play();\r\n");
      out.write("    	                  });\r\n");
      out.write("    	               	   //\r\n");
      out.write("    	               	   navigator.mediaDevices.getUserMedia({video : true,audio: true}).then(stream2 => {\r\n");
      out.write("    	               		 var call= peer.call(remotePeerId, stream2);\r\n");
      out.write("    	            	       call.on(\"stream\", stream=>{\r\n");
      out.write("    	            		   console.log(\"call on 1\");\r\n");
      out.write("    	            		   const remoteVideo=document.getElementById(\"remoteVideo\");\r\n");
      out.write("    	            		   remoteVideo.srcObject=stream;\r\n");
      out.write("    	            		   remoteVideo.onloadedmetadata=()=>remoteVideo.play();\r\n");
      out.write("    	            	     });\r\n");
      out.write("    	                   }); \r\n");
      out.write("    	    		   }else{\r\n");
      out.write("    	    			   \r\n");
      out.write("    	    			   console.log(\"ok=0 => alert\");\r\n");
      out.write("    	    			   var alert = document.getElementById('alert');\r\n");
      out.write("    	    			   alert.classList.remove('d-none');\r\n");
      out.write("    	    			   setTimeout(function() {\r\n");
      out.write("    	    			     alert.classList.add('d-none');\r\n");
      out.write("    	    			 }, 5000);\r\n");
      out.write("    	    		   }\r\n");
      out.write("    		    	   //------------------------------------------\r\n");
      out.write("    		       } else {\r\n");
      out.write("    		    	   console.log('Error:', xhr3.status);\r\n");
      out.write("    		       }\r\n");
      out.write("    		     }; \r\n");
      out.write("    		     console.log(\"send ajax call appel video\");\r\n");
      out.write("    		     xhr3.send(); \r\n");
      out.write("    		   //-------------------------------------------\r\n");
      out.write("       \r\n");
      out.write("    	   });\r\n");
      out.write("    	   \r\n");
      out.write("    	   peer.on(\"call\", call=>{ \r\n");
      out.write("    		   \r\n");
      out.write("    		   console.log(\"someone call me\");\r\n");
      out.write("    			   $('#exampleModal').modal('show'); \r\n");
      out.write("    			   console.log(\" display the modal\");// display the modal\r\n");
      out.write("    			   okAppel.addEventListener(\"click\", function(){\r\n");
      out.write("    				   \r\n");
      out.write("    				   console.log(\" appel accepté\");\r\n");
      out.write("    				   $(\"#exampleModal\").modal(\"hide\");\r\n");
      out.write("    				   setTimeout(function() {\r\n");
      out.write("    					   $('#example').modal('show'); \r\n");
      out.write("    	    			 }, 1000);\r\n");
      out.write("    				  \r\n");
      out.write("    				   navigator.mediaDevices.getUserMedia({video : true}).then(stream => {\r\n");
      out.write("    	            	   localStream=stream;\r\n");
      out.write("    	            	   //**    \r\n");
      out.write("    	        	         const videoElement = document.getElementById(\"localVideo\");\r\n");
      out.write("    	        	         videoElement.srcObject=localStream;\r\n");
      out.write("    	        	         videoElement.onloadedmetadata=()=>videoElement.play();\r\n");
      out.write("    	    		   });\r\n");
      out.write("    	            	   navigator.mediaDevices.getUserMedia({video : true,audio: true}).then(stream3 => {\r\n");
      out.write("    	            		   call.answer(stream3);\r\n");
      out.write("    	            		     call.on(\"stream\", stream=>{\r\n");
      out.write("    	            			   console.log(\"call on 2\");\r\n");
      out.write("    	            			   const remoteVideo = document.getElementById(\"remoteVideo\");\r\n");
      out.write("    	            			   remoteVideo.srcObject=stream;\r\n");
      out.write("    	            			   remoteVideo.onloadedmetadata=()=>remoteVideo.play();\r\n");
      out.write("    	            	       });\r\n");
      out.write("    	                 }); \r\n");
      out.write("    			   });\r\n");
      out.write("    			   nonAppel.addEventListener(\"click\", function(){\r\n");
      out.write("    				   $(\"#exampleModal\").modal(\"hide\");\r\n");
      out.write("    				   console.log(\"refuser \");\r\n");
      out.write("    				   var alert2 = document.getElementById('alert2');\r\n");
      out.write("    				   alert2.classList.remove('d-none');\r\n");
      out.write("        			   setTimeout(function() {\r\n");
      out.write("        			     alert2.classList.add('d-none');\r\n");
      out.write("        			 }, 5000);\r\n");
      out.write("    			   });\r\n");
      out.write("    \r\n");
      out.write("    		   });\r\n");
      out.write("    	   \r\n");
      out.write("    	   document.getElementById('stopAppel').addEventListener(\"click\",function(){\r\n");
      out.write("    		   if (remoteVideo.srcObject  && remoteVideo.srcObject.getTracks) {\r\n");
      out.write("    			   console.log(\"stream found a\");\r\n");
      out.write("    			   remoteVideo.srcObject.getTracks().forEach(function(track) {\r\n");
      out.write("    	            track.stop();\r\n");
      out.write("    	          });\r\n");
      out.write("    	        };\r\n");
      out.write("    	        if (videoElement.srcObject  && videoElement.srcObject.getTracks) {\r\n");
      out.write("     			   console.log(\"stream found b\");\r\n");
      out.write("     			  videoElement.srcObject.getTracks().forEach(function(track) {\r\n");
      out.write("     	            track.stop();\r\n");
      out.write("     	          });\r\n");
      out.write("     	        };\r\n");
      out.write("     	         peer.close();\r\n");
      out.write("     	       peer.destroy(); \r\n");
      out.write("    	   });\r\n");
      out.write("    	   \r\n");
      out.write("    	   //Appel Audio\r\n");
      out.write("    	   var localS;\r\n");
      out.write("       const LocalPeerId=peer1;\r\n");
      out.write("       var RemotePeerId;\r\n");
      out.write("       var ok2;\r\n");
      out.write("     //  const stopBtn=document.getElementById(\"stop\");\r\n");
      out.write("       \r\n");
      out.write("       RemotePeerId=idf;\r\n");
      out.write("       console.log(\"RemotePeerId :\"+RemotePeerId);\r\n");
      out.write("       const btnCall2=document.getElementById(\"btn-call\");\r\n");
      out.write("       const okCall=document.getElementById(\"okCall\");\r\n");
      out.write("       const nonCall=document.getElementById(\"nonCall\");\r\n");
      out.write("    	   btnCall2.addEventListener(\"click\", function(){  \r\n");
      out.write("    		   console.log(\"clicked call audio!\");\r\n");
      out.write("    		   //-------------------------------------------\r\n");
      out.write("    		   var xhr4 = new XMLHttpRequest();\r\n");
      out.write("    		     xhr4.open('POST', \"AppelVideo?idf=\"+idf+\"&idm=\"+idm);\r\n");
      out.write("    		     xhr4.onload = function() {\r\n");
      out.write("    		       if (xhr4.status === 200) {\r\n");
      out.write("    		    	   ok2=xhr4.responseText; \r\n");
      out.write("    		    	   console.log('Response text peer:'+ ok2+ \"bool \"+(ok2==1));\r\n");
      out.write("    		    	   //---------------------------------------------\r\n");
      out.write("    	    		   if(ok2==1){\r\n");
      out.write("    	    			   console.log(\"ok2=1\");\r\n");
      out.write("    	               	   navigator.mediaDevices.getUserMedia({audio: true}).then(streamA => {\r\n");
      out.write("    	               		 var callA= peer.call(remotePeerId, streamA);\r\n");
      out.write("    	            	       callA.on(\"stream\", stream=>{\r\n");
      out.write("    	            		   console.log(\"call audio on 1\");\r\n");
      out.write("    	            		   const remoteAudio=document.getElementById(\"remoteAudio\");\r\n");
      out.write("    	            		   remoteAudio.srcObject=stream;\r\n");
      out.write("    	            		   remoteAudio.onloadedmetadata=()=>remoteAudio.play();\r\n");
      out.write("    	            	     });\r\n");
      out.write("    	                   }); \r\n");
      out.write("    	    		   }else{\r\n");
      out.write("    	    			   \r\n");
      out.write("    	    			   console.log(\"ok=0 => alert\");\r\n");
      out.write("    	    			   var alert = document.getElementById('alert');\r\n");
      out.write("    	    			   alert.classList.remove('d-none');\r\n");
      out.write("    	    			   setTimeout(function() {\r\n");
      out.write("    	    			     alert.classList.add('d-none');\r\n");
      out.write("    	    			 }, 5000);\r\n");
      out.write("    	    		   }\r\n");
      out.write("    		    	   //------------------------------------------\r\n");
      out.write("    		       } else {\r\n");
      out.write("    		    	   console.log('Error:', xhr4.status);\r\n");
      out.write("    		       }\r\n");
      out.write("    		     }; \r\n");
      out.write("    		     console.log(\"send ajax call appel audio\");\r\n");
      out.write("    		     xhr4.send(); \r\n");
      out.write("    		   //-------------------------------------------\r\n");
      out.write("       \r\n");
      out.write("    	   });\r\n");
      out.write("    	   \r\n");
      out.write("    	   peer.on(\"call\", call2=>{ \r\n");
      out.write("    		   \r\n");
      out.write("    		   console.log(\"someone call me audio\");\r\n");
      out.write("    		         $('#audio1').modal('show'); \r\n");
      out.write("    			   okCall.addEventListener(\"click\", function(){\r\n");
      out.write("    				   $(\"#audio1\").modal(\"hide\");\r\n");
      out.write("    				   setTimeout(function() {\r\n");
      out.write("    					   $('#audio2').modal('show'); \r\n");
      out.write("    	    			 }, 1000);\r\n");
      out.write("    				   \r\n");
      out.write("    				   console.log(\" appel accepté audio\");\r\n");
      out.write("    	            	   navigator.mediaDevices.getUserMedia({audio: true}).then(streamA2 => {\r\n");
      out.write("    	            		   call2.answer(streamA2);\r\n");
      out.write("    	            		     call2.on(\"stream\", stream=>{\r\n");
      out.write("    	            			   console.log(\"call on 2\");\r\n");
      out.write("    	            			   const remoteVideo = document.getElementById(\"remoteAudio\");\r\n");
      out.write("    	            			   remoteAudio.srcObject=stream;\r\n");
      out.write("    	            			   remoteAudio.onloadedmetadata=()=>remoteAudio.play();\r\n");
      out.write("    	            	       });\r\n");
      out.write("    	                 }); \r\n");
      out.write("    			   });\r\n");
      out.write("    			   nonCall.addEventListener(\"click\", function(){\r\n");
      out.write("    				   $(\"#audio2\").modal(\"hide\");\r\n");
      out.write("    				   console.log(\"refuser \");\r\n");
      out.write("    				   var alert2 = document.getElementById('alert2');\r\n");
      out.write("    				   alert2.classList.remove('d-none');\r\n");
      out.write("        			   setTimeout(function() {\r\n");
      out.write("        			     alert2.classList.add('d-none');\r\n");
      out.write("        			 }, 5000);\r\n");
      out.write("    			   });\r\n");
      out.write("    \r\n");
      out.write("    		   });\r\n");
      out.write("    	   \r\n");
      out.write("    	   document.getElementById('stopCall').addEventListener(\"click\",function(){\r\n");
      out.write("    		   if (remoteAudio.srcObject  && remoteAudio.srcObject.getTracks) {\r\n");
      out.write("    			   console.log(\"stream found a\");\r\n");
      out.write("    			   remoteAudio.srcObject.getTracks().forEach(function(track) {\r\n");
      out.write("    	            track.stop();\r\n");
      out.write("    	          });\r\n");
      out.write("    	        };\r\n");
      out.write("    	        if (remoteAudio.srcObject  && remoteAudio.srcObject.getTracks) {\r\n");
      out.write("     			   console.log(\"stream found b\");\r\n");
      out.write("     			  remoteAudio.srcObject.getTracks().forEach(function(track) {\r\n");
      out.write("     	            track.stop();\r\n");
      out.write("     	          });\r\n");
      out.write("     	        };\r\n");
      out.write("     	         peer.close();\r\n");
      out.write("     	       peer.destroy(); \r\n");
      out.write("    	   }); */\r\n");
      out.write("    	   \r\n");
      out.write("</script>\r\n");
      out.write("	\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof jakarta.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_005fforEach_005f0(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_005fforEach_005f0 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvarStatus_005fvar_005fitems.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
    boolean _jspx_th_c_005fforEach_005f0_reused = false;
    try {
      _jspx_th_c_005fforEach_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fforEach_005f0.setParent(null);
      // /addMessage.jsp(522,0) name = items type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f0.setItems(new org.apache.jasper.el.JspValueExpression("/addMessage.jsp(522,0) '${Messages}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${Messages}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      // /addMessage.jsp(522,0) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f0.setVar("message");
      // /addMessage.jsp(522,0) name = varStatus type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f0.setVarStatus("status");
      int[] _jspx_push_body_count_c_005fforEach_005f0 = new int[] { 0 };
      try {
        int _jspx_eval_c_005fforEach_005f0 = _jspx_th_c_005fforEach_005f0.doStartTag();
        if (_jspx_eval_c_005fforEach_005f0 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("\r\n");
            out.write("<!-- <div class=\"msg_cotainer\" id=\"messageArea\">\r\n");
            out.write("\r\n");
            out.write("Hi, how are you samim? </div> -->\r\n");
            out.write("\r\n");
            if (_jspx_meth_c_005fchoose_005f0(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
              return true;
            out.write("\r\n");
            out.write("\r\n");
            int evalDoAfterBody = _jspx_th_c_005fforEach_005f0.doAfterBody();
            if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fforEach_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return true;
        }
      } catch (java.lang.Throwable _jspx_exception) {
        while (_jspx_push_body_count_c_005fforEach_005f0[0]-- > 0)
          out = _jspx_page_context.popBody();
        _jspx_th_c_005fforEach_005f0.doCatch(_jspx_exception);
      } finally {
        _jspx_th_c_005fforEach_005f0.doFinally();
      }
      _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvarStatus_005fvar_005fitems.reuse(_jspx_th_c_005fforEach_005f0);
      _jspx_th_c_005fforEach_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fforEach_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fforEach_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fchoose_005f0(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:choose
    org.apache.taglibs.standard.tag.common.core.ChooseTag _jspx_th_c_005fchoose_005f0 = (org.apache.taglibs.standard.tag.common.core.ChooseTag) _005fjspx_005ftagPool_005fc_005fchoose.get(org.apache.taglibs.standard.tag.common.core.ChooseTag.class);
    boolean _jspx_th_c_005fchoose_005f0_reused = false;
    try {
      _jspx_th_c_005fchoose_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fchoose_005f0.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
      int _jspx_eval_c_005fchoose_005f0 = _jspx_th_c_005fchoose_005f0.doStartTag();
      if (_jspx_eval_c_005fchoose_005f0 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("\r\n");
          if (_jspx_meth_c_005fwhen_005f0(_jspx_th_c_005fchoose_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("\r\n");
          if (_jspx_meth_c_005fwhen_005f1(_jspx_th_c_005fchoose_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("\r\n");
          if (_jspx_meth_c_005fwhen_005f2(_jspx_th_c_005fchoose_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("\r\n");
          if (_jspx_meth_c_005fwhen_005f3(_jspx_th_c_005fchoose_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("\r\n");
          if (_jspx_meth_c_005fotherwise_005f0(_jspx_th_c_005fchoose_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("\r\n");
          int evalDoAfterBody = _jspx_th_c_005fchoose_005f0.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fchoose_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f0);
      _jspx_th_c_005fchoose_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fchoose_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fchoose_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f0(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f0 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    boolean _jspx_th_c_005fwhen_005f0_reused = false;
    try {
      _jspx_th_c_005fwhen_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fwhen_005f0.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f0);
      // /addMessage.jsp(530,0) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fwhen_005f0.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.typeMsg == 'text'}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fwhen_005f0 = _jspx_th_c_005fwhen_005f0.doStartTag();
      if (_jspx_eval_c_005fwhen_005f0 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("\r\n");
          out.write("<div class=\"d-flex justify-content-end mb-4\">\r\n");
          out.write("\r\n");
          out.write("<div class=\"row msg_cotainer_send\">\r\n");
          out.write("\r\n");
          out.write("<div class=col-xs-5 col-md-3 col-lg-1 centreVerticalement>\r\n");
          out.write("\r\n");
          out.write("<div >");
          if (_jspx_meth_c_005fout_005f0(_jspx_th_c_005fwhen_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write(" </div> </div>\r\n");
          out.write("\r\n");
          out.write("<div class=col-xs-5 col-md-7 col-lg-9 centreVerticalement>\r\n");
          out.write("\r\n");
          out.write("<a href=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contenu}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" download>\r\n");
          out.write("\r\n");
          out.write("<i class=\"fas fa-download\"></i>\r\n");
          out.write("\r\n");
          out.write("</a> </div>\r\n");
          out.write("\r\n");
          out.write("<!-- <span class=\"msg_time_send\">9:10 AM, Today</span> -->\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("<div class=\"img_cont_msg\">\r\n");
          out.write("\r\n");
          out.write("<img src=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" class=\"rounded-circle user_img_msg\">\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          int evalDoAfterBody = _jspx_th_c_005fwhen_005f0.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fwhen_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f0);
      _jspx_th_c_005fwhen_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fwhen_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fwhen_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fout_005f0(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fwhen_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:out
    org.apache.taglibs.standard.tag.rt.core.OutTag _jspx_th_c_005fout_005f0 = (org.apache.taglibs.standard.tag.rt.core.OutTag) _005fjspx_005ftagPool_005fc_005fout_0026_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.OutTag.class);
    boolean _jspx_th_c_005fout_005f0_reused = false;
    try {
      _jspx_th_c_005fout_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fout_005f0.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fwhen_005f0);
      // /addMessage.jsp(538,6) name = value type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fout_005f0.setValue((java.lang.Object) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contenu}", java.lang.Object.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      int _jspx_eval_c_005fout_005f0 = _jspx_th_c_005fout_005f0.doStartTag();
      if (_jspx_th_c_005fout_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fout_0026_005fvalue_005fnobody.reuse(_jspx_th_c_005fout_005f0);
      _jspx_th_c_005fout_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fout_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fout_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f1(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f1 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    boolean _jspx_th_c_005fwhen_005f1_reused = false;
    try {
      _jspx_th_c_005fwhen_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fwhen_005f1.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f0);
      // /addMessage.jsp(561,0) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fwhen_005f1.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.typeMsg =='video' }", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fwhen_005f1 = _jspx_th_c_005fwhen_005f1.doStartTag();
      if (_jspx_eval_c_005fwhen_005f1 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("\r\n");
          out.write("<div class=\"d-flex justify-content-end mb-4\">\r\n");
          out.write("\r\n");
          out.write("<div class=\"msg_cotainer_send \">\r\n");
          out.write("\r\n");
          out.write("<div class=\"warning d-flex justify-content-center \">\r\n");
          out.write("\r\n");
          out.write("<div>\r\n");
          out.write("<video class=\"w-100\" controls><source src=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contenu}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\"></video>\r\n");
          out.write("\r\n");
          out.write("<a href=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contenu}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" download>\r\n");
          out.write("\r\n");
          out.write("<i class=\"fas fa-download\"></i>\r\n");
          out.write("\r\n");
          out.write("</a>\r\n");
          out.write("</div>\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("<div class=\"img_cont_msg\">\r\n");
          out.write("\r\n");
          out.write("<img src=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" class=\"rounded-circle user_img_msg\">\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          int evalDoAfterBody = _jspx_th_c_005fwhen_005f1.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fwhen_005f1.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f1);
      _jspx_th_c_005fwhen_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fwhen_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fwhen_005f1_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f2(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f2 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    boolean _jspx_th_c_005fwhen_005f2_reused = false;
    try {
      _jspx_th_c_005fwhen_005f2.setPageContext(_jspx_page_context);
      _jspx_th_c_005fwhen_005f2.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f0);
      // /addMessage.jsp(592,0) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fwhen_005f2.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.typeMsg =='fichier' }", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fwhen_005f2 = _jspx_th_c_005fwhen_005f2.doStartTag();
      if (_jspx_eval_c_005fwhen_005f2 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("\r\n");
          out.write("<div class=\"d-flex justify-content-end mb-4\">\r\n");
          out.write("\r\n");
          out.write("<div class=\"msg_cotainer_send\">\r\n");
          out.write("\r\n");
          out.write("<div class=\"warning\">\r\n");
          out.write("\r\n");
          out.write("<embed class=\"mb-3\" src=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contenu}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" width=\"500\" height=\"375\" type=\"application/pdf\">\r\n");
          out.write("\r\n");
          out.write("<a href=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contenu}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" download>\r\n");
          out.write("\r\n");
          out.write("<i class=\"fas fa-download\"></i>\r\n");
          out.write("\r\n");
          out.write("</a>\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("<!-- <span class=\"msg_time_send\">9:10 AM, Today</span> -->\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("<div class=\"img_cont_msg\">\r\n");
          out.write("\r\n");
          out.write("<img src=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" class=\"rounded-circle user_img_msg\">\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          int evalDoAfterBody = _jspx_th_c_005fwhen_005f2.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fwhen_005f2.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f2);
      _jspx_th_c_005fwhen_005f2_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fwhen_005f2, _jsp_getInstanceManager(), _jspx_th_c_005fwhen_005f2_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f3(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f3 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    boolean _jspx_th_c_005fwhen_005f3_reused = false;
    try {
      _jspx_th_c_005fwhen_005f3.setPageContext(_jspx_page_context);
      _jspx_th_c_005fwhen_005f3.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f0);
      // /addMessage.jsp(624,0) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fwhen_005f3.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.typeMsg=='audio'}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fwhen_005f3 = _jspx_th_c_005fwhen_005f3.doStartTag();
      if (_jspx_eval_c_005fwhen_005f3 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("\r\n");
          out.write("<div class=\"d-flex justify-content-end mb-4\">\r\n");
          out.write("\r\n");
          out.write("<div class=\"msg_cotainer_send\">\r\n");
          out.write("\r\n");
          out.write("<div class=\"warning\">\r\n");
          out.write("\r\n");
          out.write("<audio class=\"\" controls><source src=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contenu}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\"></audio>\r\n");
          out.write("\r\n");
          out.write("<a href=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contenu}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" download>\r\n");
          out.write("\r\n");
          out.write("<i class=\"fas fa-download\"></i>\r\n");
          out.write("\r\n");
          out.write("</a>\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("<div class=\"img_cont_msg\">\r\n");
          out.write("\r\n");
          out.write("<img src=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" class=\"rounded-circle user_img_msg\">\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          int evalDoAfterBody = _jspx_th_c_005fwhen_005f3.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fwhen_005f3.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f3);
      _jspx_th_c_005fwhen_005f3_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fwhen_005f3, _jsp_getInstanceManager(), _jspx_th_c_005fwhen_005f3_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fotherwise_005f0(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:otherwise
    org.apache.taglibs.standard.tag.common.core.OtherwiseTag _jspx_th_c_005fotherwise_005f0 = (org.apache.taglibs.standard.tag.common.core.OtherwiseTag) _005fjspx_005ftagPool_005fc_005fotherwise.get(org.apache.taglibs.standard.tag.common.core.OtherwiseTag.class);
    boolean _jspx_th_c_005fotherwise_005f0_reused = false;
    try {
      _jspx_th_c_005fotherwise_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fotherwise_005f0.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f0);
      int _jspx_eval_c_005fotherwise_005f0 = _jspx_th_c_005fotherwise_005f0.doStartTag();
      if (_jspx_eval_c_005fotherwise_005f0 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("\r\n");
          out.write("<div class=\"d-flex justify-content-end mb-4\">\r\n");
          out.write("\r\n");
          out.write("<div class=\"msg_cotainer_send\">\r\n");
          out.write("\r\n");
          out.write("<div class=\"warning\">\r\n");
          out.write("\r\n");
          out.write("<img class=\"\" src=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contenu}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\"/>\r\n");
          out.write("\r\n");
          out.write("<a href=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message.contenu}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" download>\r\n");
          out.write("\r\n");
          out.write("<i class=\"fas fa-download\"></i>\r\n");
          out.write("\r\n");
          out.write("</a>\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("<!-- <span class=\"msg_time_send\">9:10 AM, Today</span> -->\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("<div class=\"img_cont_msg\">\r\n");
          out.write("\r\n");
          out.write("<img src=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${user_emet.photo}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\" class=\"rounded-circle user_img_msg\">\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          out.write("</div>\r\n");
          out.write("\r\n");
          int evalDoAfterBody = _jspx_th_c_005fotherwise_005f0.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fotherwise_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f0);
      _jspx_th_c_005fotherwise_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fotherwise_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fotherwise_005f0_reused);
    }
    return false;
  }
}
